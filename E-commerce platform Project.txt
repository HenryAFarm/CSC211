//E-commerce Project by Henry Arevalo
import java.util.List;
import java.util.Comparator;
import java.util.stream.Collectors;
import java.util.ArrayList;

//Superclass#1
class User {
    private String fName;
    private String lName;
    
    //no-arg constructor
    public User () {
        fName = "Unknown";
        lName = "Unknown";
    }
    //constructor
    public User (String fName, String lName) {
        this.fName = fName;
        this.lName = lName;
    }
    
    public String getfName(){
        return fName;
    }
    public String getlName(){
        return lName;
    }
    //edit later
    public String toString(){
        String s = "";
        return s;
    }
    
}
//subclass for user
class Customer extends User {
    private int CustomerID;
    //to hold items of the Customer
    private List<Product> shoppingCart;
    
    public Customer (String fName, String lName, int CustomerID){
        super(fName, lName);
        this.CustomerID = CustomerID;
        this.shoppingCart = new ArrayList<>();
        
    }
    
    public void addToCart(Product p){
        this.shoppingCart.add(p);
    }
    
    public void removeFromCart(Product p){
        this.shoppingCart.remove(p);
    }
    
    public List<Product> getShoppingCart() {
        return shoppingCart;
    }
    
    public int getCustomerID(){
        return CustomerID;
    }
    
    
}
//subclass for user
class Admin extends User {
    private int ID;
    private String accessLevel;
    
    public Admin (String fName, String lName, int ID, String accessLevel){
        super(fName, lName);
        this.ID = ID;
        this.accessLevel = accessLevel;
        
    }
    //To introduce new products
    public void addProduct(Product p, List<Product> catalog){
        catalog.add(p);
        System.out.println(p.Name() + " added.");
        
    }
    
    //To change the price of an existing items
    public void updatePrice(Product p, double newPrice){
        p.setPrice(newPrice);
        System.out.println(p.Name() + " price updated to $" + newPrice);
    }
    
    //To remove an item
    public void removeProduct(Product p, List<Product> catalog){
        catalog.remove(p);
        System.out.println(p.Name() + " removed.");
    }
    
    //To see the orders that the many customer have ordered
    public void allOrders(List<Order> orders){
        for(Order o : orders) {
            System.out.println(o.toString());
            
        }
    }
    
    //to mark an order
    /* public void orderStatus(Order o, String newStatus){
        o.setStatus(newStatus);
       System.out.println("Order " + o.getID() + " Status set to " + newStatus);
    }
    */
    // To look up a customers information
    public void CustomerDetails(Customer c){
        System.out.println("Customer Name: " + c.getfName() + " " + c.getlName());
        System.out.println("Customer ID: " + c.getCustomerID());
    }
    
    //the getter
    public String getAccessLevel(){
        return accessLevel;
    }
    
    
}

//Superclass#2
class Product {
    private String Name;
    private String Category;
    private double Price;
    private String ProductID;
    
    //no-arg
    public Product(){
      Name = "Unknown";
      Category = "Unknown";
      Price = 0.00;
      ProductID = "0000";
    }
    // the constructor
    public Product(String Name, String Category, double Price, String ProductID){
       this.Name = Name;
       this.Category = Category;
       this.Price = Price;
       this.ProductID = ProductID;
    }
    
    public void setPrice(double newPrice){
        Price = newPrice;
    }
    
    public double getPrice(){
        return Price;
    }
    public String getName(){
        return Name;
    }
    
    //purpose to list everyItem. 
    public String toString(){
        String s = "All the items: "+ Name;
        return s;
        
    }
}
//subclass for product
class Electronics extends Product {
   //String[] electronics = {"Computer", "Laptop", "iphone", "Samsung", "Watch"};
    public Electronics(String Name, double Price, String ProductID) {
    super(Name, "Electronics", Price, ProductID); 
}
    
    
}
//subclass for product
class Clothing extends Product {
    //String[] clothes = {"Louis Vuitton", "Gucci", "Nike", "Adidas", "Forever 21"};
    public Clothing(String Name, double Price, String ProductID) {
    super(Name, "Clothes", Price, ProductID); 
     
}
//subclass for product
class Grocery extends Product {
   // String[] grocery = {"Apples", "Banana", "Orange", "Kiwi", "Carrot"};
     public Grocery(String Name, double Price, String ProductID) {
    super(Name, "Grocery", Price, Product); 
     
     
}

//Class for calulation
class Order {
    private Customer customer;
    private List<Product> items;
    private double subtotal;
    private double totalAmount;
    private final double TAX_RATE = 0.0875;
    private final double SHIPPING_FEE = 2.50;
    
    public Order(Customer customer, List<Product> items){
        this.customer = customer;
        this.item = new ArrayList<>(items);
        this.subtotal = calculateSubtotal(this.item);
        this.totalAmount = 0.0;
        
    }
    
    public double calculateSubtotal(List<Product> cart) {
        //adds items together
        return cart.stream()
               .mapToDouble(Product::getPrice)
               .sum();
        
    }
    // add the tax and fees
    public double calculateTotal(){
    return this.subtotal * (1 + TAX_RATE) + SHIPPING_FEE;
    }
    
    public void processOrder(){
        this.totalAmount = calculateTotal();
        
    System.out.println("Order processed successfully for Customer ID: " + customer.getCustomerID());
    System.out.printf("Subtotal: $%.2f%n", this.subtotal);
    System.out.printf("Total Amount Due: $%.2f%n", this.totalAmount);
    }
    
    
}


public class Main{
	public static void main(String[] args) {
	    //The set up
	    List<Product> catalog = new ArrayList<>();
        catalog.add(new Electronics("Laptop", 1200.00, "E1001"));
        catalog.add(new Electronics("iphone 15", 450.99, "E1002"));
        catalog.add(new Clothing("Louis Vuitton", 768.99, "C2001"));
        catalog.add(new Grocery("Apples", 4.99, "G3001"));
        
        System.out.println("E-Commerce Operations");
	    
	    //lambda expressions
	   List<Product> electronics = catalog.stream()
            .filter(p -> p.getCategory().equals("Electronics"))
            .collect(Collectors.toList()); 
        
        System.out.println("\n## Filtered Products (Electronics):");
        electronics.forEach(p -> System.out.println(p.Name() + " ($" + p.getPrice() + ")"));
	    
	    
	    //search
	    List<Product> searchResults = catalog.stream()
            .filter(p -> p.Name().contains("iphone 15"))
            .collect(Collectors.toList());
	    
	    System.out.println("\n## Search Results (Contains 'iphone 15'):");
        searchResults.forEach(p -> System.out.println(p.Name()));
	    
    	//process cart
	    cart.stream().mapTodouble(Product::getPrice.sum();    
	    //discounts
	    cart.stream().mapToDouble(p -> p.getPrice() * (1 - discountRate)).sum();
	    
	    //filtering
	    products.stream().filter(p -> p.getCategory().equals("Electronics")).toList();
	    
	    //search
	    products.stream().filter(p -> p.getName().contains("Laptop")).toList();
	    
	    //sorting from low to high
	    products.stream().sorted(Comparator.comparingDouble(Product::getPrice)).toList();
	    
	 
	     //testing
	    Order.toString();
	    
	    

}
    
}
    
